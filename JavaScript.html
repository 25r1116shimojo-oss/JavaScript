
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript é›†ä¸­è¬›åº§ï¼šã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å­¦ç¿’ã‚¬ã‚¤ãƒ‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #fdfdfd; color: #333; }
        .chart-container { position: relative; width: 100%; max-width: 500px; margin: 0 auto; height: 300px; max-height: 400px; }
        .code-block { background-color: #1e1e1e; color: #d4d4d4; font-family: monospace; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
        .interactive-card { transition: all 0.3s ease; }
        .interactive-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .dom-node { transition: all 0.3s; }
        .highlight-anim { animation: highlight 1s ease-out; }
        @keyframes highlight {
            0% { background-color: #fde047; }
            100% { background-color: transparent; }
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals (Slate/Gray/White) with JavaScript Yellow (#F7DF1E) and Blue (#3B82F6) accents for semantic highlighting. -->
    <!-- Application Structure Plan: 
         1. Hero Section: High-level overview of JS role vs HTML/CSS.
         2. Domain Landscape: Visualization of JS use cases (Front/Back/Mobile/Desktop) using Chart.js.
         3. Core Mechanics Lab: Interactive playground for Variables (const vs let) and Data Types.
         4. Advanced Concepts Simulator: 
            - Event Loop visualizer (Queue vs Stack).
            - Type Coercion calculator/explainer.
         5. DOM Playground: A sandbox to manipulate a mini DOM tree and see code reflect actions.
         Rationale: This structure moves from "What is it?" to "How does it work?" to "Try it out", facilitating active learning.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex-shrink-0 flex items-center gap-2">
                    <div class="w-8 h-8 bg-yellow-400 rounded flex items-center justify-center font-bold text-slate-900">JS</div>
                    <span class="font-bold text-xl tracking-tight text-slate-800">JSé›†ä¸­è¬›åº§</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="scrollToSection('intro')" class="text-slate-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition">æ¦‚è¦ & ç”¨é€”</button>
                    <button onclick="scrollToSection('basics')" class="text-slate-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition">åŸºæœ¬è¦ç´ </button>
                    <button onclick="scrollToSection('advanced')" class="text-slate-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition">ç‰¹æœ‰ã®æ©Ÿèƒ½</button>
                    <button onclick="scrollToSection('dom')" class="text-slate-600 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition">DOMæ“ä½œ</button>
                </div>
                <!-- Mobile menu button stub -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-btn" class="text-slate-600 hover:text-slate-900 focus:outline-none p-2">
                        <span class="block w-6 h-0.5 bg-current mb-1"></span>
                        <span class="block w-6 h-0.5 bg-current mb-1"></span>
                        <span class="block w-6 h-0.5 bg-current"></span>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-slate-200 px-4 py-2">
            <button onclick="scrollToSection('intro')" class="block w-full text-left py-2 text-slate-600">æ¦‚è¦ & ç”¨é€”</button>
            <button onclick="scrollToSection('basics')" class="block w-full text-left py-2 text-slate-600">åŸºæœ¬è¦ç´ </button>
            <button onclick="scrollToSection('advanced')" class="block w-full text-left py-2 text-slate-600">ç‰¹æœ‰ã®æ©Ÿèƒ½</button>
            <button onclick="scrollToSection('dom')" class="block w-full text-left py-2 text-slate-600">DOMæ“ä½œ</button>
        </div>
    </nav>

    <!-- Hero / Intro Section -->
    <section id="intro" class="py-12 md:py-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-6">Webã®ã€Œå‹•ãã€ã‚’æ”¯é…ã™ã‚‹è¨€èª</h1>
            <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
                HTMLãŒã€Œéª¨çµ„ã¿ã€ã€CSSãŒã€Œè¦‹ãŸç›®ã€ãªã‚‰ã€<span class="bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded font-semibold">JavaScriptã¯ã€Œå‹•ä½œã€</span>ã§ã™ã€‚<br>
                Webãƒ–ãƒ©ã‚¦ã‚¶ã ã‘ã§ãªãã€ã‚µãƒ¼ãƒãƒ¼ã‚„ã‚¢ãƒ—ãƒªé–‹ç™ºã¾ã§ã€ãã®æ´»èºã®å ´ã¯åºƒãŒã‚Šç¶šã‘ã¦ã„ã¾ã™ã€‚
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <!-- 3 Pillars Concept -->
            <div class="space-y-6">
                <h3 class="text-2xl font-bold text-slate-800 mb-4 border-l-4 border-blue-500 pl-4">Webé–‹ç™ºã®3å¤§è¦ç´ </h3>
                <div class="grid grid-cols-1 gap-4">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center gap-4 interactive-card">
                        <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 font-bold text-lg">H</div>
                        <div>
                            <h4 class="font-bold text-slate-800">HTML (æ§‹é€ )</h4>
                            <p class="text-sm text-slate-500">ãƒ†ã‚­ã‚¹ãƒˆã€ç”»åƒã®é…ç½®ãªã©ã€ãƒšãƒ¼ã‚¸ã®éª¨æ ¼ã‚’ä½œã‚Šã¾ã™ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 flex items-center gap-4 interactive-card">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-lg">C</div>
                        <div>
                            <h4 class="font-bold text-slate-800">CSS (è£…é£¾)</h4>
                            <p class="text-sm text-slate-500">è‰²ã€ãƒ•ã‚©ãƒ³ãƒˆã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãªã©ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-yellow-400 flex items-center gap-4 interactive-card transform scale-105">
                        <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 font-bold text-lg">JS</div>
                        <div>
                            <h4 class="font-bold text-slate-800">JavaScript (å‹•ä½œ)</h4>
                            <p class="text-sm text-slate-500">ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†ã€ãƒ‡ãƒ¼ã‚¿ã®é€å—ä¿¡ã€å‹•çš„æ›´æ–°ã‚’æ‹…ã„ã¾ã™ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Visualization of Usage -->
            <div class="bg-white p-6 rounded-2xl shadow-lg border border-slate-100">
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-slate-800">é€²åŒ–ã™ã‚‹JavaScriptã®ç”¨é€”</h3>
                    <p class="text-sm text-slate-500">ãƒ–ãƒ©ã‚¦ã‚¶ã®å¤–ã§ã‚‚JSã¯å‹•ä½œã—ã¾ã™ã€‚ä¸»è¦ãªå®Ÿè¡Œç’°å¢ƒã®åˆ†å¸ƒã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚</p>
                </div>
                <!-- Visualization & Content Choices: 
                     Use: Chart.js Doughnut Chart
                     Goal: Visually categorize the "Usage Fields" mentioned in Section 1.
                     Why: A list is good, but a chart emphasizes that JS is a multi-purpose language.
                -->
                <div class="chart-container">
                    <canvas id="usageChart"></canvas>
                </div>
                <div class="mt-4 grid grid-cols-2 gap-2 text-xs text-slate-500 text-center">
                    <div class="bg-slate-50 p-2 rounded">
                        <span class="block font-bold text-blue-600">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</span>
                        Webãƒ–ãƒ©ã‚¦ã‚¶ UI
                    </div>
                    <div class="bg-slate-50 p-2 rounded">
                        <span class="block font-bold text-green-600">ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</span>
                        Node.js / API
                    </div>
                    <div class="bg-slate-50 p-2 rounded">
                        <span class="block font-bold text-purple-600">ãƒ¢ãƒã‚¤ãƒ«</span>
                        React Native
                    </div>
                    <div class="bg-slate-50 p-2 rounded">
                        <span class="block font-bold text-slate-600">ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—</span>
                        Electron
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Basics Section -->
    <section id="basics" class="py-16 bg-slate-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-10">
                <h2 class="text-3xl font-bold text-slate-900">2. JavaScriptã®åŸºæœ¬è¦ç´ </h2>
                <p class="text-slate-600 mt-2">å¤‰æ•°ã€ãƒ‡ãƒ¼ã‚¿å‹ã€é–¢æ•°ã¨ã„ã£ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã‚’ã€å®Ÿéš›ã«å€¤ã‚’æ“ä½œã—ã¦ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Variables Lab -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 rounded bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold">var</span>
                        å¤‰æ•°ã¨å®šæ•° (let vs const)
                    </h3>
                    <p class="text-sm text-slate-500 mb-6"><code>const</code> ã¯å†ä»£å…¥ä¸å¯ã€<code>let</code> ã¯å¯èƒ½ã§ã™ã€‚ã‚¹ã‚¤ãƒƒãƒã‚’åˆ‡ã‚Šæ›¿ãˆã¦æŒ™å‹•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>

                    <div class="space-y-4">
                        <div class="flex items-center gap-4 bg-slate-50 p-4 rounded-lg">
                            <div class="flex flex-col gap-2">
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="radio" name="varType" value="let" class="form-radio text-blue-600" onchange="updateVarLab()">
                                    <span class="ml-2 font-mono text-sm">let name = "ç”°ä¸­";</span>
                                </label>
                                <label class="inline-flex items-center cursor-pointer">
                                    <input type="radio" name="varType" value="const" class="form-radio text-red-600" checked onchange="updateVarLab()">
                                    <span class="ml-2 font-mono text-sm">const name = "ç”°ä¸­";</span>
                                </label>
                            </div>
                        </div>

                        <div class="flex items-center gap-2">
                            <span class="text-sm font-mono text-slate-500">å®Ÿè¡Œ:</span>
                            <button onclick="attemptReassign()" class="bg-slate-800 text-white px-4 py-2 rounded text-sm hover:bg-slate-700 transition">
                                name = "ä½è—¤"; (å†ä»£å…¥)
                            </button>
                        </div>

                        <div id="varResult" class="p-3 bg-gray-100 rounded text-sm font-mono min-h-[3rem] flex items-center">
                            <!-- JS will populate this -->
                            çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...
                        </div>
                    </div>
                </div>

                <!-- Data Types Grid -->
                <div class="bg-white rounded-xl shadow-sm p-6">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="w-8 h-8 rounded bg-teal-100 text-teal-600 flex items-center justify-center text-sm font-bold">dat</span>
                        ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ (Data Types)
                    </h3>
                    <p class="text-sm text-slate-500 mb-4">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å„å‹ã®è©³ç´°ã¨ä¾‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
                    
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <button onclick="showTypeInfo('string')" class="p-3 rounded border border-slate-200 hover:bg-teal-50 hover:border-teal-200 transition text-left group">
                            <div class="font-mono text-teal-600 font-bold group-hover:text-teal-700">string</div>
                            <div class="text-xs text-slate-400 mt-1">æ–‡å­—åˆ—</div>
                        </button>
                        <button onclick="showTypeInfo('number')" class="p-3 rounded border border-slate-200 hover:bg-blue-50 hover:border-blue-200 transition text-left group">
                            <div class="font-mono text-blue-600 font-bold group-hover:text-blue-700">number</div>
                            <div class="text-xs text-slate-400 mt-1">æ•°å€¤</div>
                        </button>
                        <button onclick="showTypeInfo('boolean')" class="p-3 rounded border border-slate-200 hover:bg-purple-50 hover:border-purple-200 transition text-left group">
                            <div class="font-mono text-purple-600 font-bold group-hover:text-purple-700">boolean</div>
                            <div class="text-xs text-slate-400 mt-1">çœŸå½å€¤</div>
                        </button>
                        <button onclick="showTypeInfo('null')" class="p-3 rounded border border-slate-200 hover:bg-gray-50 hover:border-gray-300 transition text-left group">
                            <div class="font-mono text-gray-500 font-bold group-hover:text-gray-700">null</div>
                            <div class="text-xs text-slate-400 mt-1">ç©ºå€¤</div>
                        </button>
                        <button onclick="showTypeInfo('undefined')" class="p-3 rounded border border-slate-200 hover:bg-orange-50 hover:border-orange-200 transition text-left group">
                            <div class="font-mono text-orange-500 font-bold group-hover:text-orange-700">undefined</div>
                            <div class="text-xs text-slate-400 mt-1">æœªå®šç¾©</div>
                        </button>
                    </div>
                    <div id="typeInfoBox" class="mt-4 p-4 bg-slate-50 border-l-4 border-teal-500 rounded-r text-sm">
                        <p class="font-bold text-slate-700" id="typeTitle">å‹ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                        <p class="text-slate-600 mt-1" id="typeDesc">ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                        <code class="block mt-2 bg-white p-2 rounded border border-slate-200 text-xs text-slate-500" id="typeExample">// ä¾‹</code>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Advanced Features Section -->
    <section id="advanced" class="py-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-12">
            <h2 class="text-3xl font-bold text-slate-900">3. JavaScriptç‰¹æœ‰ã®æ©Ÿèƒ½</h2>
            <p class="text-slate-600 mt-2">ä»–ã®è¨€èªã¨ã¯ç•°ãªã‚‹ã€JSã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæŒ™å‹•ï¼ˆéåŒæœŸå‡¦ç†ã€å‹å¼·åˆ¶ï¼‰ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ç†è§£ã—ã¾ã™ã€‚</p>
        </div>

        <div class="space-y-12">
            <!-- Event Loop Simulator -->
            <div class="bg-white rounded-2xl shadow-lg border border-slate-100 overflow-hidden">
                <div class="p-6 md:p-8 bg-gradient-to-r from-slate-900 to-slate-800 text-white">
                    <h3 class="text-2xl font-bold mb-2">ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã¨éåŒæœŸå‡¦ç†</h3>
                    <p class="text-slate-300 text-sm md:w-2/3">
                        JSã¯ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã™ãŒã€æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ï¼ˆã‚¿ã‚¤ãƒãƒ¼ã‚„APIé€šä¿¡ï¼‰ã‚’ã€ŒWeb APIã€ã«ä»»ã›ã€
                        å®Œäº†å¾Œã«ã€Œã‚­ãƒ¥ãƒ¼ã€ã«å…¥ã‚Œã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ç”»é¢ã‚’ãƒ•ãƒªãƒ¼ã‚ºã•ã›ãšã«å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
                    </p>
                </div>
                <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Control -->
                    <div class="space-y-4">
                        <h4 class="font-bold text-slate-700 border-b pb-2">æ“ä½œãƒ‘ãƒãƒ«</h4>
                        <p class="text-sm text-slate-500">ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚</p>
                        <button onclick="addSyncTask()" class="w-full bg-blue-100 hover:bg-blue-200 text-blue-800 font-bold py-2 px-4 rounded transition text-left flex justify-between items-center">
                            <span>1. åŒæœŸã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ </span>
                            <span class="text-xs bg-white px-2 py-1 rounded">å³æ™‚</span>
                        </button>
                        <button onclick="addAsyncTask()" class="w-full bg-yellow-100 hover:bg-yellow-200 text-yellow-800 font-bold py-2 px-4 rounded transition text-left flex justify-between items-center">
                            <span>2. éåŒæœŸã‚¿ã‚¹ã‚¯ (3ç§’)</span>
                            <span class="text-xs bg-white px-2 py-1 rounded">Web APIã¸</span>
                        </button>
                    </div>

                    <!-- Visualization Area -->
                    <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Main Thread Stack -->
                        <div class="border-2 border-slate-200 border-dashed rounded-lg p-4 min-h-[200px] relative bg-slate-50">
                            <span class="absolute top-2 left-2 text-xs font-bold text-slate-400 uppercase tracking-wider">Main Thread (Stack)</span>
                            <div id="mainStack" class="mt-6 space-y-2 flex flex-col-reverse">
                                <!-- Tasks appear here -->
                            </div>
                        </div>

                        <!-- Web API & Queue -->
                        <div class="space-y-4">
                            <div class="border border-slate-200 rounded-lg p-4 bg-yellow-50 min-h-[80px] relative">
                                <span class="absolute top-2 left-2 text-xs font-bold text-yellow-600 uppercase tracking-wider">Web API (Background)</span>
                                <div id="webApiArea" class="mt-4 flex gap-2 flex-wrap">
                                    <!-- Async tasks waiting -->
                                </div>
                            </div>
                            <div class="flex justify-center text-2xl text-slate-300">â¬‡ï¸ Callback</div>
                            <div class="border border-slate-200 rounded-lg p-4 bg-green-50 min-h-[80px] relative">
                                <span class="absolute top-2 left-2 text-xs font-bold text-green-600 uppercase tracking-wider">Callback Queue</span>
                                <div id="callbackQueue" class="mt-4 space-y-1">
                                    <!-- Finished async tasks wait here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coercion Calculator -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">å‹å¼·åˆ¶ (Type Coercion) å®Ÿé¨“å®¤</h3>
                    <p class="text-sm text-slate-500 mb-4">
                        <code>'10' + 5</code> ã¨ <code>'10' - 5</code> ã®çµæœãŒé•ã†ç†ç”±ã‚’å®Ÿé¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                    </p>
                    
                    <div class="flex flex-col gap-4 bg-slate-50 p-6 rounded-lg">
                        <div class="flex items-center gap-2 text-xl font-mono">
                            <select id="coercionLeft" class="p-2 border rounded bg-white" onchange="calcCoercion()">
                                <option value="'10'">String: '10'</option>
                                <option value="10">Number: 10</option>
                                <option value="true">Boolean: true</option>
                            </select>
                            <select id="coercionOp" class="p-2 border rounded bg-white font-bold text-blue-600" onchange="calcCoercion()">
                                <option value="+">+</option>
                                <option value="-">-</option>
                            </select>
                            <select id="coercionRight" class="p-2 border rounded bg-white" onchange="calcCoercion()">
                                <option value="5">Number: 5</option>
                                <option value="'5'">String: '5'</option>
                                <option value="1">Number: 1</option>
                            </select>
                        </div>
                        <div class="border-t border-slate-200 my-2"></div>
                        <div class="text-right">
                            <span class="text-sm text-slate-400 mr-2">çµæœ:</span>
                            <span id="coercionResult" class="text-3xl font-bold text-slate-800">105</span>
                            <span id="coercionType" class="block text-xs font-mono text-slate-500 mt-1">(string)</span>
                        </div>
                        <div id="coercionExplain" class="text-sm text-slate-600 bg-yellow-50 p-2 rounded border border-yellow-100">
                            æ–‡å­—åˆ—çµåˆãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
                        </div>
                    </div>
                </div>

                <!-- Prototype Chain Visual -->
                <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒã‚§ãƒ¼ãƒ³</h3>
                    <p class="text-sm text-slate-500 mb-4">
                        ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ¢ã™ã¨ãã€è‡ªèº«ã®è¦ªï¼ˆãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼‰ã‚’é¡ã‚‹ä»•çµ„ã¿ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚
                    </p>

                    <div class="relative pl-4 border-l-2 border-slate-200 space-y-6">
                        <!-- Parent -->
                        <div class="relative">
                            <div class="absolute -left-[25px] top-4 w-4 h-4 bg-slate-200 rounded-full border-2 border-white"></div>
                            <div class="bg-slate-50 p-4 rounded border border-slate-200">
                                <span class="text-xs font-bold text-slate-400 uppercase">Prototype (è¦ª)</span>
                                <div class="font-mono text-sm mt-1 text-slate-600">
                                    greet: function() { ... }
                                </div>
                            </div>
                        </div>
                        
                        <!-- Arrow -->
                        <div class="text-center text-slate-300 text-lg">â¬†ï¸ [[Prototype]]</div>

                        <!-- Child -->
                        <div class="relative">
                            <div class="absolute -left-[25px] top-4 w-4 h-4 bg-blue-500 rounded-full border-2 border-white"></div>
                            <div class="bg-blue-50 p-4 rounded border border-blue-200 shadow-sm">
                                <span class="text-xs font-bold text-blue-500 uppercase">MyObject (å­)</span>
                                <div class="font-mono text-sm mt-1 text-slate-800 font-bold">
                                    name: "ãƒ¦ãƒ¼ã‚¶ãƒ¼"
                                </div>
                                <div class="mt-2 pt-2 border-t border-blue-100 text-xs text-slate-600">
                                    <code>MyObject.greet()</code> ã‚’å‘¼ã¶ã¨...<br>
                                    1. è‡ªèº«ã« <code>greet</code> ãŒã‚ã‚‹ã‹ç¢ºèª (ãªã„)<br>
                                    2. ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãƒã‚§ãƒ¼ãƒ³ã‚’é¡ã‚‹<br>
                                    3. è¦ªã«ã‚ã‚‹ <code>greet</code> ã‚’å®Ÿè¡Œï¼
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- DOM Section -->
    <section id="dom" class="py-16 bg-slate-100">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900">4. DOMæ“ä½œ ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰</h2>
                <p class="text-slate-600 mt-2">JavaScriptã‚’ä½¿ã£ã¦HTMLè¦ç´ ï¼ˆDOMï¼‰ã‚’æ“ä½œã™ã‚‹æ§˜å­ã‚’ä½“é¨“ã—ã¦ãã ã•ã„ã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- The Code & Controls -->
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm">
                        <h4 class="font-bold text-slate-700 mb-4">ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«</h4>
                        <div class="space-y-3">
                            <button onclick="changeDomText()" class="w-full bg-slate-800 text-white px-4 py-3 rounded hover:bg-slate-700 transition flex items-center justify-between group">
                                <span>ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´</span>
                                <code class="text-xs text-slate-400 group-hover:text-white transition">.textContent = "..."</code>
                            </button>
                            <button onclick="changeDomColor()" class="w-full bg-blue-600 text-white px-4 py-3 rounded hover:bg-blue-500 transition flex items-center justify-between group">
                                <span>ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´ (è‰²)</span>
                                <code class="text-xs text-blue-200 group-hover:text-white transition">.style.color = "red"</code>
                            </button>
                            <button onclick="addDomElement()" class="w-full bg-green-600 text-white px-4 py-3 rounded hover:bg-green-500 transition flex items-center justify-between group">
                                <span>è¦ç´ ã‚’è¿½åŠ </span>
                                <code class="text-xs text-green-200 group-hover:text-white transition">.appendChild(...)</code>
                            </button>
                        </div>
                    </div>
                    
                    <div class="code-block text-sm h-48 overflow-y-auto" id="domLog">
                        <span class="text-slate-500">// æ“ä½œãƒ­ã‚°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</span>
                    </div>
                </div>

                <!-- The DOM Visualizer -->
                <div class="bg-white p-8 rounded-xl shadow-lg border-2 border-slate-200 flex flex-col items-center justify-center min-h-[300px] relative">
                    <span class="absolute top-2 left-2 text-xs font-bold text-slate-300">WEB BROWSER VIEW</span>
                    
                    <!-- Target Elements -->
                    <div id="targetContainer" class="text-center space-y-4 w-full">
                        <h3 id="targetTitle" class="text-2xl font-bold text-slate-800 dom-node p-2 rounded">ã“ã‚“ã«ã¡ã¯ï¼</h3>
                        <p id="targetDesc" class="text-slate-500 dom-node">ã“ã“ãŒJavaScriptã«ã‚ˆã£ã¦æ“ä½œã•ã‚Œã¾ã™ã€‚</p>
                        <div id="extraArea" class="space-y-2 pt-4"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm">JavaScript Lecture Material Interactive Guide</p>
            <p class="text-xs mt-2 text-slate-600">Created for Educational Purposes</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. Navigation & Scroll ---
        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                el.scrollIntoView({ behavior: 'smooth' });
            }
            // Close mobile menu if open
            const menu = document.getElementById('mobile-menu');
            if(!menu.classList.contains('hidden')) {
                menu.classList.add('hidden');
            }
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        // --- 2. Chart.js Implementation (Intro Section) ---
        // Visualization Choice: Doughnut chart to visualize usage distribution roughly based on importance/context
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('usageChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Browser)', 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (Node.js)', 'ãƒ¢ãƒã‚¤ãƒ« (Native)', 'ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (Electron)'],
                    datasets: [{
                        data: [50, 30, 10, 10], // Estimated relative importance for a beginner context
                        backgroundColor: [
                            '#3B82F6', // Blue-500
                            '#22C55E', // Green-500
                            '#A855F7', // Purple-500
                            '#64748B'  // Slate-500
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: { family: "'Noto Sans JP', sans-serif" },
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
            
            // Initialize other components
            calcCoercion();
        });

        // --- 3. Variables Lab Logic ---
        let currentVarState = "ç”°ä¸­";
        
        function updateVarLab() {
            // Reset state visually when switching types
            currentVarState = "ç”°ä¸­";
            document.getElementById('varResult').innerHTML = '<span class="text-slate-400">åˆæœŸçŠ¶æ…‹: name = "ç”°ä¸­"</span>';
            document.getElementById('varResult').className = "p-3 bg-gray-100 rounded text-sm font-mono min-h-[3rem] flex items-center";
        }

        function attemptReassign() {
            const radios = document.getElementsByName('varType');
            let selectedType;
            for(const r of radios) { if(r.checked) selectedType = r.value; }

            const resBox = document.getElementById('varResult');
            
            if (selectedType === 'let') {
                currentVarState = "ä½è—¤";
                resBox.innerHTML = '<span class="text-green-600 font-bold">æˆåŠŸ:</span> name ã¯ "ä½è—¤" ã«ãªã‚Šã¾ã—ãŸã€‚';
                resBox.className = "p-3 bg-green-50 border border-green-200 rounded text-sm font-mono min-h-[3rem] flex items-center";
            } else {
                resBox.innerHTML = '<span class="text-red-600 font-bold">ã‚¨ãƒ©ãƒ¼:</span> TypeError: Assignment to constant variable.<br>(å®šæ•°ã¯å†ä»£å…¥ã§ãã¾ã›ã‚“)';
                resBox.className = "p-3 bg-red-50 border border-red-200 rounded text-sm font-mono min-h-[3rem] flex items-center";
            }
        }

        // --- 4. Data Types Logic ---
        const typeData = {
            'string': { title: 'String (æ–‡å­—åˆ—)', desc: 'æ–‡å­—ã®ä¸¦ã³ã‚’è¡¨ã—ã¾ã™ã€‚ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ(") ã¾ãŸã¯ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ(\') ã§å›²ã¿ã¾ã™ã€‚', example: 'let text = "ã“ã‚“ã«ã¡ã¯";' },
            'number': { title: 'Number (æ•°å€¤)', desc: 'æ•´æ•°ã‚„å°æ•°ã‚’æ‰±ã„ã¾ã™ã€‚è¨ˆç®—ã«ä½¿ç”¨ã§ãã¾ã™ã€‚', example: 'let price = 100;\nlet pi = 3.14;' },
            'boolean': { title: 'Boolean (çœŸå½å€¤)', desc: 'true (çœŸ) ã¾ãŸã¯ false (å½) ã®ã©ã¡ã‚‰ã‹ã®å€¤ã‚’ã¨ã‚Šã¾ã™ã€‚æ¡ä»¶åˆ†å²ã«ã‚ˆãä½¿ã‚ã‚Œã¾ã™ã€‚', example: 'let isDone = true;' },
            'null': { title: 'Null', desc: 'ã€Œå€¤ãŒå­˜åœ¨ã—ãªã„ã€ã“ã¨ã‚’æ„å›³çš„ã«ç¤ºã™ç‰¹åˆ¥ãªå€¤ã§ã™ã€‚', example: 'let result = null;' },
            'undefined': { title: 'Undefined', desc: 'å¤‰æ•°ãŒå®£è¨€ã•ã‚ŒãŸãŒã€ã¾ã å€¤ãŒä»£å…¥ã•ã‚Œã¦ã„ãªã„çŠ¶æ…‹ã§ã™ã€‚', example: 'let data;\nconsole.log(data); // undefined' }
        };

        function showTypeInfo(type) {
            const info = typeData[type];
            document.getElementById('typeTitle').textContent = info.title;
            document.getElementById('typeDesc').textContent = info.desc;
            document.getElementById('typeExample').innerText = info.example;
            
            const box = document.getElementById('typeInfoBox');
            // Remove all specific border colors
            box.className = box.className.replace(/border-\w+-500/g, '');
            
            // Add specific color
            const colors = { 'string': 'teal', 'number': 'blue', 'boolean': 'purple', 'null': 'gray', 'undefined': 'orange' };
            box.classList.add(`border-${colors[type]}-500`);
            
            // Subtle animation
            box.classList.remove('opacity-100');
            void box.offsetWidth; // trigger reflow
            box.classList.add('opacity-100');
        }

        // --- 5. Event Loop Simulator Logic ---
        function addSyncTask() {
            const stack = document.getElementById('mainStack');
            const task = document.createElement('div');
            task.className = 'bg-blue-600 text-white p-2 rounded shadow text-center text-sm font-bold animate-pulse';
            task.textContent = 'åŒæœŸã‚¿ã‚¹ã‚¯ (console.log)';
            stack.appendChild(task);

            // Execute immediately (remove after short delay)
            setTimeout(() => {
                task.remove();
            }, 800);
        }

        function addAsyncTask() {
            const webApi = document.getElementById('webApiArea');
            const task = document.createElement('div');
            task.className = 'bg-yellow-400 text-yellow-900 p-2 rounded shadow text-xs font-bold w-full text-center transition-all duration-[3000ms] ease-linear';
            task.textContent = 'Timer (3s)...';
            task.style.width = '0%';
            webApi.appendChild(task);

            // Simulate Web API processing
            setTimeout(() => {
                task.style.width = '100%';
            }, 100);

            setTimeout(() => {
                task.remove();
                moveToQueue();
            }, 3000);
        }

        function moveToQueue() {
            const queue = document.getElementById('callbackQueue');
            const cb = document.createElement('div');
            cb.className = 'bg-green-500 text-white p-2 rounded shadow text-xs font-bold text-center';
            cb.textContent = 'Callback Fn';
            queue.appendChild(cb);

            // Event Loop Check: If stack is empty (simulated by simple timeout here), move to stack
            setTimeout(() => {
                cb.remove();
                runCallbackInStack();
            }, 1000);
        }

        function runCallbackInStack() {
            const stack = document.getElementById('mainStack');
            const task = document.createElement('div');
            task.className = 'bg-green-600 text-white p-2 rounded shadow text-center text-sm font-bold border-2 border-yellow-400';
            task.textContent = 'Callbackå®Ÿè¡Œä¸­';
            stack.appendChild(task);
            setTimeout(() => {
                task.remove();
            }, 800);
        }

        // --- 6. Type Coercion Logic ---
        function calcCoercion() {
            const leftVal = document.getElementById('coercionLeft').value;
            const op = document.getElementById('coercionOp').value;
            const rightVal = document.getElementById('coercionRight').value;

            // Parse values to real JS types for calculation
            const parseVal = (v) => {
                if(v === 'true') return true;
                if(v.startsWith("'")) return v.replace(/'/g, ""); // string
                return Number(v); // number
            };

            const l = parseVal(leftVal);
            const r = parseVal(rightVal);
            let res;

            if (op === '+') res = l + r;
            else res = l - r;

            // Update UI
            document.getElementById('coercionResult').textContent = typeof res === 'string' ? `'${res}'` : res;
            document.getElementById('coercionType').textContent = `(${typeof res})`;

            // Generate explanation
            let explain = "";
            if (op === '+' && (typeof l === 'string' || typeof r === 'string')) {
                explain = "ã€æ–‡å­—åˆ—çµåˆã€‘ ç‰‡æ–¹ãŒæ–‡å­—åˆ—ã®ãŸã‚ã€ã‚‚ã†ä¸€æ–¹ã‚‚æ–‡å­—åˆ—ã«å¤‰æ›ã•ã‚Œçµåˆã•ã‚Œã¾ã—ãŸã€‚";
            } else if (op === '-') {
                explain = "ã€æ•°å€¤å¤‰æ›ã€‘ å¼•ãç®—(-)ã¯æ•°å€¤ã®ã¿ã§æœ‰åŠ¹ãªãŸã‚ã€æ–‡å­—åˆ—ãŒæ•°å€¤ã«å¤‰æ›ã•ã‚Œã¾ã—ãŸã€‚";
            } else if (typeof l === 'boolean') {
                 explain = `ã€Booleanå¤‰æ›ã€‘ true ã¯æ•°å€¤ã® 1 ã«å¤‰æ›ã•ã‚Œã¦è¨ˆç®—ã•ã‚Œã¾ã—ãŸã€‚`;
            } else {
                explain = "é€šå¸¸ã®æ•°å€¤è¨ˆç®—ãŒè¡Œã‚ã‚Œã¾ã—ãŸã€‚";
            }
            document.getElementById('coercionExplain').textContent = explain;
        }

        // --- 7. DOM Playground Logic ---
        const domLog = document.getElementById('domLog');

        function logAction(msg) {
            const line = document.createElement('div');
            line.textContent = `> ${msg}`;
            line.className = "mb-1 border-b border-gray-700 pb-1";
            domLog.insertBefore(line, domLog.firstChild);
        }

        function changeDomText() {
            const title = document.getElementById('targetTitle');
            title.textContent = "å¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼";
            title.classList.remove('highlight-anim');
            void title.offsetWidth; 
            title.classList.add('highlight-anim');
            
            logAction('document.getElementById("title").textContent = "å¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼";');
        }

        function changeDomColor() {
            const title = document.getElementById('targetTitle');
            const desc = document.getElementById('targetDesc');
            
            // Random color for fun
            const colors = ['#EF4444', '#3B82F6', '#10B981', '#F59E0B'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            title.style.color = color;
            desc.style.color = color;
            
            logAction(`document.getElementById("title").style.color = "${color}";`);
        }

        function addDomElement() {
            const container = document.getElementById('extraArea');
            const newEl = document.createElement('div');
            newEl.textContent = "ğŸ“¦ æ–°ã—ã„è¦ç´ ";
            newEl.className = "p-2 bg-slate-100 rounded border border-slate-300 text-sm font-bold animate-bounce";
            container.appendChild(newEl);
            
            logAction('const el = document.createElement("div"); box.appendChild(el);');
            
            // Remove animation class after a bit so it doesn't bounce forever
            setTimeout(() => newEl.classList.remove('animate-bounce'), 1000);
        }

    </script>
</body>
</html>